$(document).ready((function(){var e={lastScrollTop:0,init:function(){this.bindEvents(),this.initLazy(),this.setToggleHelpers(),this.initIsotope(),this.initOwlSliders()},bindEvents:function(){$(window).on("scroll",this.hideHeader),$(".menu").on("click",this.handleMenu),$(".slide-to-content").on("click",this.scrollToContent),$(".info-nav-link a").on("click",this.setMenuState)},initLazy:function(){$("img.lazy.pending").lazyload({placeholder:"/assets/images/lazy-holding.png",load:function(){$(this).removeClass("pending"),$(this).closest(".llb-animate").addClass("loaded")}}),$("div.lazy.pending").lazyload({placeholder:"/assets/images/lazy-holding.png",load:function(){$(this).removeClass("pending")}}),$(".lazy-trigger").lazyload({placeholder:"/assets/images/lazy-holding.png",load:function(){$(this).removeClass("pending"),$(this).closest(".llb-animate").addClass("loaded")},event:"manualLoad"})},setToggleHelpers:function(){$(".toggle-drop-filter").click((function(){$(this).next(".filter-wrap").toggleClass("open"),$(this).toggleClass("active")})),$(".share-toggle").click((function(){$(this).toggleClass("close"),$(this).next(".share-reveal").toggleClass("open")})),$(".toggle-pane .toggle-link").click((function(){$(this).closest(".toggle-pane").toggleClass("open")}))},setMenuState:function(){event.preventDefault(),$("#info-menu").toggleClass("visible"),$("#info-content").toggleClass("visible"),$(".info-navigation").toggleClass("switched")},initIsotope:function(){$(document).click((function(e){$(e.target).closest(".cta-filter-dual-block").length}));var e=$(".grid").isotope({layoutMode:"masonry",itemSelector:".item",percentPosition:!0});e.on("click",".content-wrap",(function(){$(this).closest("article").toggleClass("open-content"),e.isotope("layout")}))},initOwlSliders:function(){function t(t,i,a){$(i).addClass("updating"),setTimeout((function(){e.initLazy();var s=$(t+" .owl-item.active .replacement-content h3").html(),o=$(t+" .owl-item.active .replacement-content .panel-copy").html(),n=$(t+" .owl-item.active .replacement-content a").attr("href");$(a+".panel-info h3").html(s),$(a+".panel-info .panel-copy").html(o),$(a+".panel-info a").attr("href",n),$(i).removeClass("updating")}),600)}$(".page-slider").owlCarousel({loop:!1,margin:4,nav:!0,dots:!0,items:3,navSpeed:1e3,dragEndSpeed:1e3,lazyLoad:!0,lazyLoadEager:3,responsive:{0:{items:2},900:{items:3}}}),$(".news-slider").owlCarousel({loop:!1,margin:0,nav:!0,dots:!0,items:2,navSpeed:1e3,dragEndSpeed:1e3,lazyLoad:!0,lazyLoadEager:3,responsive:{0:{items:1},900:{items:2}}}),$(".wf-slider").owlCarousel({loop:!1,margin:0,nav:!0,items:1,smartSpeed:1e3,dots:!1,navContainer:"#wf-nav",animateOut:"fadeOut",mouseDrag:!1,touchDrag:!1,onTranslate:function(){var e=".wide-feature-slider";t(e,e+" .dynamic-info","#wf-info")}}),$(".wo-slider").owlCarousel({loop:!1,margin:0,nav:!0,dots:!1,items:1,smartSpeed:1e3,navContainer:"#wo-nav",mouseDrag:!1,touchDrag:!1,lazyLoad:!0,lazyLoadEager:3,onTranslate:function(){var e=".right-aligned-slider";t(e,e+" .di-wrap","#wo-info")}})},hideHeader:function(){$(window).scroll((function(t){var i=$(this).scrollTop();Math.abs(e.lastScrollTop-i)<=1||(i>e.lastScrollTop&&i>50?$("header").removeClass("on-top").addClass("off-top"):i+$(window).height()<$(document).height()&&$("header").removeClass("off-top").addClass("on-top"),e.lastScrollTop=i)}))},handleMenu:function(){$(".mobile-nav-container").toggleClass("open"),$("body").toggleClass("menu-open"),$(this).toggleClass("open")},scrollToContent:function(){return event.preventDefault(),$("html, body").animate({scrollTop:$($.attr(this,"href")).offset().top+60},900,"easeInOutQuint"),!1}},t={init:function(){this.bindEvents(),new Clipboard(".link-copy")},bindEvents:function(){$(".share-links .link-copy").on("click",this.shareLinks)},shareLinks:function(){event.preventDefault();var e=$(".copy-notified");e.empty(),e.append("Link copied to clipboard"),e.addClass("pop-up"),setTimeout((function(){e.removeClass("pop-up")}),2e3)},shareViaTwitter:function(e){var t="http://twitter.com/intent/tweet?text="+e.share_title+": "+e.share_description+"&url="+e.share_url;""!==e.share_handle&&void 0!==e.share_handle&&(t+="&via="+e.share_handle),window.open(encodeURI(t),"twitterwindow","height=450, width=550, top="+($(window).height()/2-225)+", left="+$(window).width()/2+", toolbar=0, location=0, menubar=0, directories=0, scrollbars=0")},shareViaFacebook:function(e){window.open("https://www.facebook.com/sharer/sharer.php?u="+e.share_url,"dl_facebook_share","height=600, width=600, top="+($(window).height()/2-300)+", left="+$(window).width()/2+",toolbar=0, location=0, menubar=0, directories=0, scrollbars=0")},shareViaInstagram:function(e){window.location.replace("whatsapp://send?text="+encodeURI(e.share_url))}},i={init:function(){this.bindEvents()},bindEvents:function(){$(".video-load").on("click",this.loadVideo),$(".video-unload").on("click",this.unloadVideo)},loadVideo:function(){$(".video-wrap .holding").addClass("hidden"),$(".video-wrap .video").removeClass("hidden"),$(".home-video-variation").addClass("video-active"),$("#home-video-player iframe").attr("src",$(this).data("vid-src"))},unloadVideo:function(){$(".video-wrap .holding").removeClass("hidden"),$(".video-wrap .video").addClass("hidden"),$(".home-video-variation").removeClass("video-active"),$("#home-video-player iframe").attr("src","")}},a={init:function(){this.bindEvents(),this.triggerStageFilter(),this.showView()},bindEvents:function(){$("#stage-all").on("click",this.setAllStagesFilter),$(".stage-filter-radio").on("click",this.setOtherStagesFilter),$("a.social-share-button").on("click",this.triggerSharing),$(".stage-list-switch .g-view").on("click",this.toggleGridView),$(".stage-list-switch .l-view").on("click",this.toggleListView),$(".stage-listing-wrap .l-view-toggle").on("click",this.toggleStageListView)},triggerStageFilter:function(){$(".stage-grid").isotope({layoutMode:"masonry",itemSelector:".item",transitionDuration:0,percentPosition:!0,filter:function(){var e="#check-"+$(this).attr("id");return $("#stage-all").is(":checked")||$(e).is(":checked")}})},showView:function(){var e=window.location.hash.substr(1,window.location.hash.length-1);if(e)switch(e){case"listing":this.toggleListView();break;case"grid":this.toggleGridView()}},triggerSharing:function(e){e.preventDefault();var i=$(this).closest("section.stage").find(".share-meta"),a={share_title:i.find(".share-title").html(),share_description:i.find(".share-description").html(),share_handle:i.find(".share-"+$(this).data("service")+"-handle").html(),share_image:i.find(".share-image").data("src-img"),share_url:window.location.href};"twitter"===$(this).data("service")?t.shareViaTwitter(a):"facebook"===$(this).data("service")?t.shareViaFacebook(a):t.shareViaInstagram(a)},setAllStagesFilter:function(){$(this).is(":checked")&&$(".stage-filter-radio").prop("checked",!1),a.triggerStageFilter()},setOtherStagesFilter:function(){$(this).is(":checked")&&$("#stage-all").prop("checked",!1);var e=$(".stage-filter-radio"),t=e.length,i=e.filter(":checked").length;0!==i&&t!==i||setTimeout((function(){e.prop("checked",!1),$("#stage-all").prop("checked",!0)}),250),setTimeout((function(){a.triggerStageFilter()}),350),$("img.lazy").trigger("manualLoad"),a.triggerStageFilter()},toggleGridView:function(){$(".stage-list-switch").removeClass("l-active"),$(".stage-list-switch").addClass("g-active"),$(".stage-grid").removeClass("listing"),location.hash="#grid",a.triggerStageFilter(),$("img.lazy").trigger("manualLoad")},toggleListView:function(){$(".stage-list-switch").removeClass("g-active"),$(".stage-list-switch").addClass("l-active"),$(".stage-grid").addClass("listing"),location.hash="#listing",a.triggerStageFilter()},toggleStageListView:function(){$(this).toggleClass("open"),$(this).next(".l-view-content").toggleClass("open-content"),a.triggerStageFilter()}},s={init:function(){this.bindEvents()},bindEvents:function(){$("ul.news-category-list li a").on("click",this.showNewsSection),$(".news-grid").on("removeComplete",this.addNewNewsSectionItems),$(".load-more").on("click",this.initLoadMoreButton),window.onpopstate=this.manageBackButton,$("a.social-share-button").on("click",this.triggerSharing)},getNewsAjax:function(t){$.ajax({url:"/wp-admin/admin-ajax.php",data:{action:"newsAjax",offset:$(".news-article-block").length,terms:t},success:function(t){var i=t.split("~~~"),a=(t=$(i[0]),i[1]);$(".news-grid").isotope().append(t).isotope("appended",t).isotope("layout"),$(".news-article-block .feature-image img.lazy").lazyload({placeholder:"/assets/images/lazy-holding.png",load:function(){$(this).removeClass("pending"),$(this).closest(".feature-image").next().addClass("loaded")}}),e.initLazy(),$("img.lazy:lt(4)").trigger("appear"),s.showMoreButtonAndHideLoader(),$(".news-article-block").length>=a&&($(".load-more").hide(),$(".end-notification").text("That's all folks!").addClass("visible"))}})},getNewsForNewCategory:function(e){s.hideMoreButtonAndShowLoader(),$("ul.news-category-list li.active").removeClass("active"),e.closest("li").addClass("active"),$(".news-grid").isotope("remove",$(".item"))},hideMoreButtonAndShowLoader:function(){$(".load-more").hide(),$(".loading-animation").addClass("active"),$(".end-notification").text("").removeClass("visible")},showMoreButtonAndHideLoader:function(){$(".load-more").show(),$(".loading-animation").removeClass("active")},showNewsSection:function(){event.preventDefault(),s.getNewsForNewCategory($(this))},addNewNewsSectionItems:function(e,t){var i=$("ul.news-category-list li.active a").data("term");if("/news"===window.location.pathname)var a="all"!==i;else a=window.location.pathname!=="/news-category/"+i+"/";if(a){var o="all"===i?"/news":"/news-category/"+i+"/";window.history.pushState("","",o)}s.getNewsAjax("all"===i?"news-default":i)},initLoadMoreButton:function(){s.hideMoreButtonAndShowLoader();var e=$("ul.news-category-list li.active a").data("term");s.getNewsAjax("all"===e?"news-default":e)},manageBackButton:function(e){if("/news"===window.location.pathname)var t="all";else t=window.location.pathname.replace("/news-category/","").replace("/","");s.getNewsForNewCategory($("[data-term="+t+"]"))},triggerSharing:function(e){e.preventDefault();var i={share_title:$('meta[property="og:title"]').attr("content"),share_description:"",share_handle:$(".share-meta").find(".share-"+$(this).data("service")+"-handle").html(),share_url:$('meta[property="og:url"]').attr("content")};"twitter"===$(this).data("service")?t.shareViaTwitter(i):"facebook"===$(this).data("service")?t.shareViaFacebook(i):t.shareViaInstagram(i)}},o={init:function(){this.bindEvents(),this.setActiveLinkFromURL()},filterReset:function(){},bindEvents:function(){$("ul.tickets-category-list li a").on("click",this.setCategoryFromClickedLink),$(".reset-filter").on("click",this.filterReset),window.onpopstate=this.manageBackButton,window.onload=this.setActiveLinkFromURL},showTicketsForCategory:function(e){var t=""===e?"#tickets-weekend":"#tickets-"+e.data("term");if(""!==e&&-1===window.location.hash.indexOf(e.data("term"))){var i="#tickets-weekend"===t?"/tickets":"/tickets/"+t;window.history.pushState("","",i)}"#tickets-luxury"===t&&$(".ticket-listing img.lazy").lazyload({placeholder:"/assets/images/lazy-holding.png",load:function(){$(this).removeClass("pending")}}),$(".ticket-listing section").removeClass("visible"),$(t).addClass("visible")},setCorrectNavLinkAsActive:function(e){""===e&&(e=$("[data-term=weekend]")),$("ul.tickets-category-list li").removeClass("active"),e.closest("li").addClass("active")},getActiveCategoryFromPathname:function(){var e=window.location.hash;return""===e?"":$("[data-term="+e.replace("#tickets-","")+"]")},switchTicketCategory:function(e){o.setCorrectNavLinkAsActive(e),o.showTicketsForCategory(e)},setCategoryFromClickedLink:function(e){e.preventDefault(),o.switchTicketCategory($(this))},manageBackButton:function(){var e=o.getActiveCategoryFromPathname();o.switchTicketCategory(e)},setActiveLinkFromURL:function(){window.scrollTo(0,0),o.switchTicketCategory(o.getActiveCategoryFromPathname())}},n={init:function(){this.bindEvents(),this.triggerFoodFilter(),this.setNoResultsText("")},bindEvents:function(){$("#c-all").on("click",this.setAllCuisineState),$(".cuisine-filter-radio").on("click",this.setCuisineFilterStates),$(".dietary-filter-radio").on("click",this.setDietaryFilterStates)},updateFoodFilterText:function(e,t,i){var a="";0===t.length&&(a="<li>"+i+"</li>"),t.forEach((function(e){var t=e.replace(/^.c-/,"").replace(/^.d-/,"").replace(/-/gi," ");a+="<li>"+t+"</li>"})),$(e).html(a)},triggerFoodFilter:function(){if($("#c-all").is(":checked"))var e=[".c-all"];else{e=[];$(".cuisine-filter-radio").each((function(){$(this).is(":checked")&&e.push("."+$(this).attr("id").replace("-check",""))}))}var t=[];$(".dietary-filter-radio").each((function(){$(this).is(":checked")&&t.push("."+$(this).attr("id").replace("-check",""))}));var i=[];e.forEach((function(e){var a=e;t.forEach((function(e){a+=e})),i.push(a)}));var a=$(".wo-grid-food");a.isotope({layoutMode:"masonry",itemSelector:".item",percentPosition:!0,filter:i.join(",")}),0===a.isotope("getFilteredItemElements").length?n.setNoResultsText("No results match your current filters"):n.setNoResultsText(""),n.updateFoodFilterText("ul.cuisine-list",e,"all cuisines"),n.updateFoodFilterText("ul.dietary-list",t,"all diets")},setNoResultsText:function(e){$(".no-result-notification").html("<p>"+e+"</p>")},setAllCuisineState:function(){$(this).is(":checked")?$(".cuisine-filter-radio").prop("checked",!1):$(this).prop("checked",!0),n.triggerFoodFilter()},setCuisineFilterStates:function(){$(this).is(":checked")&&$("#c-all").prop("checked",!1),$("img.lazy").trigger("manualLoad");var e=$(".cuisine-filter-radio"),t=e.length,i=e.filter(":checked").length;0!==i&&t!==i||setTimeout((function(){$(".cuisine-filter-radio").prop("checked",!1),$("#c-all").prop("checked",!0)}),250),setTimeout((function(){n.triggerFoodFilter()}),350)},setDietaryFilterStates:function(){$("img.lazy").trigger("manualLoad"),n.triggerFoodFilter()}},l={init:function(){this.bindEvents(),this.manageBannerVisibility()},bindEvents:function(){$("button.dismiss").on("click",this.setBannerCookie)},manageBannerVisibility:function(){var e=document.cookie.replace(/(?:(?:^|.*;\s*)latitude_alert_notification\s*\=\s*([^;]*).*$)|^.*$/,"$1");void 0!==e&&""!==e||$(".alert-banner").removeClass("hidden")},setBannerCookie:function(){var e=new Date;e.setMonth(e.getMonth()+1),document.cookie="latitude_alert_notification=true; expires="+e.toUTCString(),$(".alert-banner").addClass("hidden")}},r={typingTimeout:1e3,filterParams:[],urlParams:{genre:[],stage:[],day:[]},sortLengths:{genre:6,stage:10,day:4},query:"",isIsotopeInit:!0,artistGrid:$(".wo-grid-artist"),init:function(){this.countLengths(),this.bindEvents(),this.setNoResultsText("");location.hash.split("&").forEach((e=>{let t=e.split("="),i=t[0].replace("#","").replace("?",""),a=t[1];a&&(r.urlParams[i]=a.split(","),this.handleFiltering(i))})),r.updateUrl()},countLengths:function(){for(var e in this.sortLengths)this.sortLengths[e]=$("#by-"+e+" div:not(.top-bar)").length},updateUrl:function(){let e=`${r.urlParams.stage.join(",").length>0?"?stage="+r.urlParams.stage.join(",")+"&":""}${r.urlParams.genre.join(",").length>0?"?genre="+r.urlParams.genre.join(",")+"&":""}${r.urlParams.day.join(",").length>0?"?day="+r.urlParams.day.join(","):""}`;e&&(location.hash=e)},filterReset:function(){$(".genre-filter-radio").each((function(){$(this).is(":checked")&&$(this).prop("checked",!1)})),$(".day-filter-radio").each((function(){$(this).is(":checked")&&$(this).prop("checked",!1)})),$(".stage-filter-radio").each((function(){$(this).is(":checked")&&$(this).prop("checked",!1)})),$(".toggle-drop-filter.active").each((function(){$(this).click()})),$("#genre-show-all").prop("checked",!0),$("#day-show-all").prop("checked",!0),$("#stage-show-all").prop("checked",!0),r.setNoResultsText(""),$(".reset-filters").removeClass("reset-now"),r.artistGrid.isotope({filter:"*"}),r.urlParams={genre:["genre-show-all"],stage:["stage-show-all"],day:["day-show-all"]},r.updateUrl()},bindEvents:function(){$(".genre-filter-radio").on("click",(e=>{this.handleClick(e,"genre")})),$(".day-filter-radio").on("click",(e=>{this.handleClick(e,"day")})),$(".stage-filter-radio").on("click",(e=>{this.handleClick(e,"stage")})),$(".reset-filters").on("click",r.filterReset),$("#tab-artist-filter").on("click",(function(e){e.preventDefault(),$(this).closest("li").toggleClass("active"),$("#tab-artist-search").closest("li").toggleClass("active"),$("#artist-search-option").removeClass("active"),$("#artist-filter-option").addClass("active"),$("#a-search").prop("value",""),r.filterReset()})),$("#tab-artist-search").on("click",(function(e){e.preventDefault(),$(this).closest("li").toggleClass("active"),$("#tab-artist-filter").closest("li").toggleClass("active"),$("#artist-search-option").addClass("active"),$("#artist-filter-option").removeClass("active"),r.filterReset()})),$("#a-search").on("keyup",r.artistTextSearch),$("#a-search").on("focusout",(()=>{$(".search-wrapper").removeClass("typing-active")}))},artistTextSearch:function(e){$(".search-wrapper").addClass("typing-active"),r.query=e.target.value.toLowerCase().split(" "),r.artistGrid.isotope({filter:function(){let e=$(this).data("title").toString().toLowerCase().split(" ");return r.query.every((t=>e.some((e=>e.startsWith(t)))))}}),r.loadNewImagesInView(),0===r.artistGrid.isotope("getFilteredItemElements").length?(r.setNoResultsText("No results match your current filters."),$(".reset-filters").addClass("reset-now")):r.setNoResultsText(""),setTimeout((function(){$(".search-wrapper").removeClass("typing-active")}),r.typingTimeout)},updateCheckboxes:function(e){r.urlParams[e].forEach((e=>{$(`#${e}`).prop("checked",!0)})),$(".reset-filters").addClass("reset-now"),$(`.${e}-filter-radio`).each((function(){$(this).is(":checked")&&$(this)[0].id!==`${e}-show-all`&&$(`#${e}-show-all`).prop("checked",!1)})),noneChecked=!0,$(`.${e}-filter-radio`).each((function(){$(this).is(":checked")&&(noneChecked=!1)})),noneChecked&&$(`#${e}-show-all`).prop("checked",!0)},handleClick:function(e,t){e.target.id!==`${t}-show-all`?($(`#${t}-show-all`).prop("checked",!1),$(".reset-filters").addClass("reset-now")):$(`.${t}-filter-radio`).each((function(){$(this).is(":checked")&&$(this)[0].id!==`${t}-show-all`&&$(this).prop("checked",!1)})),this.triggerFilter(t)},assignFilterParams:function(e){$(`#${e}-show-all`).is(":checked")&&($(".reset-filters").removeClass("reset-now"),$(`.${e}-filter-radio`).each((function(){$(this).is(":checked")&&$(this)[0].id!==`${e}-show-all`&&$(this).prop("checked",!1)})),r.filterParams.push(`${e}-all`)),$(`.${e}-filter-radio`).each((function(){$(this).is(":checked")&&r.filterParams.push(`${$(this)[0].id}`)})),r.urlParams[e]=r.filterParams,r.filterParams=[]},handlePostFilter:function(e){0===r.artistGrid.isotope("getFilteredItemElements").length?(r.setNoResultsText("No results match your current filters."),$(".reset-filters").addClass("reset-now")):r.setNoResultsText("")},triggerFilter:function(e){r.assignFilterParams(e),r.handleFiltering(e),r.handlePostFilter(e),r.filterParams=[]},handleFiltering:function(e){r.updateCheckboxes(e),r.artistGrid.isotope({layoutMode:"masonry",itemSelector:"article.item",percentPosition:!0,filter:function(){let e=Object.values($(this).data());e=e.map((e=>e.split(" ")));let t=[!1,!1,!1];return Object.values(r.urlParams.stage).length>0?Object.values(r.urlParams.stage).forEach((i=>{(e[0].indexOf(i)>-1||i.indexOf("-all")>-1)&&(t[0]=!0)})):t[0]=!0,Object.values(r.urlParams.day).length>0?Object.values(r.urlParams.day).forEach((i=>{(e[1].indexOf(i)>-1||i.indexOf("-all")>-1)&&(t[1]=!0)})):t[1]=!0,Object.values(r.urlParams.genre).length>0?Object.values(r.urlParams.genre).forEach((i=>{(e[2].indexOf(i)>-1||i.indexOf("-all")>-1)&&(t[2]=!0)})):t[2]=!0,!(t.indexOf(!1)>-1)}}),r.updateUrl(),r.loadNewImagesInView()},setNoResultsText:function(e){$(".no-result-notification").html("<p>"+e+"</p>")},loadNewImagesInView:function(){setTimeout((function(){window.scrollBy(0,1),window.scrollBy(0,-1)}),500)}};$((function(){e.init(),$(".home-video-container").length>0&&i.init(),$(".stage-listing").length>0&&(a.init(),t.init()),$(".grid.news-grid").length>0&&s.init(),$(".share-panel").length>0&&t.init(),$(".ticket-listing").length>0&&o.init(),$(".wo-grid-food").length>0&&n.init(),$(".artist-container").length>0&&r.init(),$(".alert-banner.hidden").length>0&&l.init()}))}));